{
  "comments": [
    {
      "key": {
        "uuid": "dbe6fa45_f6ea4d29",
        "filename": "roles/post_install/openstack_tasks/tasks/instances.yml",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2019-07-16T08:12:22Z",
      "side": 1,
      "message": "This flow could work.\nAnd I know it solves your current scenario.\n\nBut I just want to warn you that when you would like to add a flow that includes access to the instance, it will require you to add security groups, ssh keypair and such, this flow will not work for you.\n\nSetting +2. Will wait for the other guys to give their opinion.",
      "range": {
        "startLine": 8,
        "startChar": 15,
        "endLine": 8,
        "endChar": 34
      },
      "revId": "1f20c9a14676a6564f83f3b98462619b34f8eae0",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c737b4ce_4716e798",
        "filename": "roles/post_install/openstack_tasks/tasks/instances.yml",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1016438
      },
      "writtenOn": "2019-07-18T06:54:36Z",
      "side": 1,
      "message": "This is nitpicking, but when I first saw it I was thinking you were referring to deploy resources on a completely different stack instead of cloud.\n\nPerhaps it’s worth to change the var name to something that represents the action more, like ‘cloud_name’?",
      "range": {
        "startLine": 8,
        "startChar": 20,
        "endLine": 8,
        "endChar": 34
      },
      "revId": "1f20c9a14676a6564f83f3b98462619b34f8eae0",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a943359_28708376",
        "filename": "roles/post_install/openstack_tasks/tasks/instances.yml",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1016438
      },
      "writtenOn": "2019-07-18T06:54:36Z",
      "side": 1,
      "message": "Maxim raised a good point,\nYou may want to consider to adding the same logic to the files: \nroles/post_install/openstack_tasks/tasks/aggregate.yml\nroles/post_install/openstack_tasks/tasks/keypair.yml\nroles/post_install/openstack_tasks/tasks/quota.yml\nroles/post_install/openstack_tasks/tasks/users.yml\nroles/post_install/openstack_tasks/tasks/flavors.yml\nroles/post_install/openstack_tasks/tasks/images.yml\nroles/post_install/openstack_tasks/tasks/networks_and_routers.yml\nroles/post_install/openstack_tasks/tasks/security_groups.yml",
      "parentUuid": "dbe6fa45_f6ea4d29",
      "range": {
        "startLine": 8,
        "startChar": 15,
        "endLine": 8,
        "endChar": 34
      },
      "revId": "1f20c9a14676a6564f83f3b98462619b34f8eae0",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c6142221_d2bdd1fb",
        "filename": "roles/post_install/openstack_tasks/tasks/instances.yml",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2019-07-18T07:10:16Z",
      "side": 1,
      "message": "I\u0027m not sure it\u0027s worth adding to other files, because it may lead to the complete mess which will be unable to debug.\n\nTo be honesh I woudnt approve this change, but I know it solved specific Gal\u0027s issue.",
      "parentUuid": "8a943359_28708376",
      "range": {
        "startLine": 8,
        "startChar": 15,
        "endLine": 8,
        "endChar": 34
      },
      "revId": "1f20c9a14676a6564f83f3b98462619b34f8eae0",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8279eb86_2cca0cb2",
        "filename": "roles/post_install/openstack_tasks/tasks/instances.yml",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2019-07-18T07:10:16Z",
      "side": 1,
      "message": "Agree. Let\u0027s do it in another patch.",
      "parentUuid": "c737b4ce_4716e798",
      "range": {
        "startLine": 8,
        "startChar": 20,
        "endLine": 8,
        "endChar": 34
      },
      "revId": "1f20c9a14676a6564f83f3b98462619b34f8eae0",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe10940f_2eb9716a",
        "filename": "roles/post_install/openstack_tasks/tasks/instances.yml",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1016438
      },
      "writtenOn": "2019-07-18T07:54:26Z",
      "side": 1,
      "message": "If we create instances in a different cloud/project/tenant, we will most likely need additional configuration applied there.\n\nWhy not have an option to support this?\n\nPerhaps in the future we would like to create resources not as an admin and do it as a user like tempest. We would leverage neutron policies which currently are an important part of our deployments.",
      "parentUuid": "c6142221_d2bdd1fb",
      "range": {
        "startLine": 8,
        "startChar": 15,
        "endLine": 8,
        "endChar": 34
      },
      "revId": "1f20c9a14676a6564f83f3b98462619b34f8eae0",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85fec5c2_e66b41aa",
        "filename": "roles/post_install/openstack_tasks/tasks/instances.yml",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2019-07-18T07:58:06Z",
      "side": 1,
      "message": "Vadim, we already support it.\nYou just need to rewrite the \"overcloud_name\" variable.\n\nThe downside of this is that you need to execute the playbook twice.\nFirst time to create users, flavors, images and some of the networks with admin user.\nAnd the second time when you execute it with your created user and create remain networks, keypair, secgroups and boot instances.",
      "parentUuid": "fe10940f_2eb9716a",
      "range": {
        "startLine": 8,
        "startChar": 15,
        "endLine": 8,
        "endChar": 34
      },
      "revId": "1f20c9a14676a6564f83f3b98462619b34f8eae0",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b9c4dd0_bf29ac39",
        "filename": "roles/post_install/openstack_tasks/tasks/instances.yml",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1016438
      },
      "writtenOn": "2019-07-18T08:10:46Z",
      "side": 1,
      "message": "Yes you are correct regarding \"overcloud_name\", I forgot that this playbook only uses this var for resource creation and overcloud deletion. My source of confusion came from the variable name.\n\nRegarding the second point, some workflows can be achieved in one resource creation run even with basic default deployment. You perhaps won’t be able to use quotas and aggregation groups but neutron policies that are ‘admin_or_owner’ could work.\n\nI feel like I over complicated Gal’s use case as of now and went out of scope of his change. Gal feel free to disregard my comment if the change is enough for you.",
      "parentUuid": "85fec5c2_e66b41aa",
      "range": {
        "startLine": 8,
        "startChar": 15,
        "endLine": 8,
        "endChar": 34
      },
      "revId": "1f20c9a14676a6564f83f3b98462619b34f8eae0",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}