---

- hosts: localhost
  connection: local
  name: Configure Dell iDRAC Bios Configuration
  gather_facts: False
  tasks:
    - name: Parse iDRAC Hosts From 'idrac_hosts' Variable
      set_fact:
        dell_idrac_baseuri: "{{ idrac_hosts.split(',') }}"
    - name: Parse BIOS Atrributes And Values From 'idrac_bios_attributes' Variable
      set_fact:
        dell_idrac_bios_attribute: "{{ idrac_bios_attributes.split(',')}}"
    - name: Print Parsed iDRAC Hosts
      debug:
        var: dell_idrac_baseuri | mandatory
    - name: Print Parsed iDRAC BIOS Attributes
      debug:
        var: dell_idrac_bios_attribute | mandatory
    - name: Iterate Over iDRAC Hosts
      include_role:
        name: configuration/dell_idrac_configuration
      loop: "{{ dell_idrac_baseuri }}"
