#jinja2:lstrip_blocks: True
parameter_defaults:
{% for opt in deploy_config %}
{% if 'sriov_opts' in opt %}
  {% if 'neutron_mechanism_drivers' in opt.sriov_opts %}
  NeutronMechanismDrivers: [{{ opt.sriov_opts.neutron_mechanism_drivers }}]
  {% endif %}
  {% if 'neutron_plugin_extensions' in opt.sriov_opts %}
  NeutronPluginExtensions: "{{ opt.sriov_opts.neutron_plugin_extensions }}"
  {% endif %}
  {% if 'neutron_service_plugin' in opt.sriov_opts %}
  NeutronServicePlugins: "{{ opt.sriov_opts.neutron_service_plugin }}"
  {% endif %}
  {% if 'neutron_sriov_agent_extensions' in opt.sriov_opts %}
  NeutronSriovAgentExtensions: "{{ opt.sriov_opts.neutron_sriov_agent_extensions }}"
  {% endif %}
  {% if 'sriov_mapping' in opt.sriov_opts %}
  NovaPCIPassthrough:
    {% for sriov_opt in opt.sriov_opts.sriov_mapping %}
    - devname: "{{ sriov_opt.iface }}"
      trusted: "{{ sriov_opt.trusted }}"
      physical_network: "{{ sriov_opt.physnet }}"
    {% endfor %}
  NeutronPhysicalDevMappings:
    {% for sriov_opt in opt.sriov_opts.sriov_mapping %}
    - "{{ sriov_opt.physnet }}:{{ sriov_opt.iface }}"
    {% endfor %}
  {% endif %}
{% endif %}
{% endfor %}
