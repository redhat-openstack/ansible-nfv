{
  "comments": [
    {
      "key": {
        "uuid": "15f2323d_9b9674ef",
        "filename": "roles/tester/tempest/tasks/register_variables.yml",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2019-08-18T08:06:52Z",
      "side": 1,
      "message": "I can\u0027t understand what is the logic of this task.\nNext task checks the existence of the v3 file.\nAnd this task will fail as it will not find the requested file.\n\nI\u0027m looking on the last ci \"15\" job, if this is the job you pointed on, and the reason for the failure is that the overcloudrc.v3 file exists but empty, which should not happen.\n\nIn any case, the \"10\" job is working properly and it is missing the v3 file as well.",
      "range": {
        "startLine": 3,
        "startChar": 2,
        "endLine": 3,
        "endChar": 13
      },
      "revId": "363098d5f34461ff1f602c3f0a31256f3a90b2ef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "100de188_131c1ef5",
        "filename": "roles/tester/tempest/tasks/register_variables.yml",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 1008484
      },
      "writtenOn": "2019-08-18T08:45:57Z",
      "side": 1,
      "message": "Correct, but 13 is checking for overcloudrc.v3\nAnd the content is valid and not \"null\"\n\nIt is output if the following commands in TripleO\nopenstack action execution run   --save-result   --run-sync   tripleo.deployment.overcloudrc   \u0027{\"container\":\"overcloud\"}\u0027   | jq -r \u0027.[\"result\"][\"overcloudrc\"]\u0027 \u003e overcloudrc\nor \nopenstack action execution run   --save-result   --run-sync   tripleo.deployment.overcloudrc   \u0027{\"container\":\"overcloud\"}\u0027   | jq -r \u0027.[\"result\"][\"overcloudrc.v3\"]\u0027 \u003e overcloudrc.v3",
      "parentUuid": "15f2323d_9b9674ef",
      "range": {
        "startLine": 3,
        "startChar": 2,
        "endLine": 3,
        "endChar": 13
      },
      "revId": "363098d5f34461ff1f602c3f0a31256f3a90b2ef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3815882a_0d2459b0",
        "filename": "roles/tester/tempest/tasks/register_variables.yml",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2019-08-18T09:13:39Z",
      "side": 1,
      "message": "How TripleO relates here?\nWe are talking about the existence check of the v3 file.\n\nIf the v3 file exists, it will be used, otherwise it will use the rc standard file.",
      "parentUuid": "100de188_131c1ef5",
      "range": {
        "startLine": 3,
        "startChar": 2,
        "endLine": 3,
        "endChar": 13
      },
      "revId": "363098d5f34461ff1f602c3f0a31256f3a90b2ef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2ada4876_0e44afbe",
        "filename": "roles/tester/tempest/tasks/register_variables.yml",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 1008484
      },
      "writtenOn": "2019-08-18T10:41:25Z",
      "side": 1,
      "message": "It is created with String null in it.\nSee the following\n[stack@undercloud-0 ~]$ cat overcloudrc.v3 \nnull",
      "parentUuid": "3815882a_0d2459b0",
      "range": {
        "startLine": 3,
        "startChar": 2,
        "endLine": 3,
        "endChar": 13
      },
      "revId": "363098d5f34461ff1f602c3f0a31256f3a90b2ef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "288b414b_bb136d17",
        "filename": "roles/tester/tempest/tasks/register_variables.yml",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2019-08-18T11:35:09Z",
      "side": 1,
      "message": "But what is the reason to create a file?\n\nThe \"Check for the v3 overcloudrc file\" task does the job of checking the file existence.",
      "parentUuid": "2ada4876_0e44afbe",
      "range": {
        "startLine": 3,
        "startChar": 2,
        "endLine": 3,
        "endChar": 13
      },
      "revId": "363098d5f34461ff1f602c3f0a31256f3a90b2ef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b071851c_cebadc4e",
        "filename": "roles/tester/tempest/tasks/register_variables.yml",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 1008484
      },
      "writtenOn": "2019-08-18T12:27:22Z",
      "side": 1,
      "message": "It is created like that\nIt is checking if the content of the file is null\nIf it is it ignores the overcloudrc.v3\nThe default of the module is checking existence of string in the file\nMaybe we should open a BZ for tripleo\nCurrent status in 15 it is created with null, in 14 and 13 it has content.\nThis is failing tempest playbook,\nIt is stared with latest pass_phase2",
      "parentUuid": "288b414b_bb136d17",
      "range": {
        "startLine": 3,
        "startChar": 2,
        "endLine": 3,
        "endChar": 13
      },
      "revId": "363098d5f34461ff1f602c3f0a31256f3a90b2ef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4c774d2_70f8c628",
        "filename": "roles/tester/tempest/tasks/register_variables.yml",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2019-08-18T13:31:00Z",
      "side": 1,
      "message": "I think there is some confusion.\n\nIn \"15\" the overcloudrc.v3 file is deprecated, but it is not created at all (not empty and not in any other case).\nI\u0027m not sure where the v3 file in ci came from, but it has not been created by the deployment for sure. You can see the creation dates of the overcloudrc and overcloudrc.v3 files. They are different.\n\nI have verified with a number of other \"15\" jobs and no one has the overcloudrc.v3 file.\n\nSo no need to create an empty file with null context and check anything against it.\nThe existing play checks for the existence of the v3 file and act accordingly.",
      "parentUuid": "b071851c_cebadc4e",
      "range": {
        "startLine": 3,
        "startChar": 2,
        "endLine": 3,
        "endChar": 13
      },
      "revId": "363098d5f34461ff1f602c3f0a31256f3a90b2ef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}