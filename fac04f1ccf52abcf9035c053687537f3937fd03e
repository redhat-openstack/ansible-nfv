{
  "comments": [
    {
      "key": {
        "uuid": "5ef0454b_b68c1224",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 1,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T12:53:22Z",
      "side": 1,
      "message": "Ansible-nfv repository has the playbooks as a pointers to the roles.\nThe playbooks calls to the roles, reuses them and may perform some very simple logic that not mature enough to be converted into a role.\n\nHere I see that the tasks are definitely could be converted into a role and not hold all the login in a playbook.\n\nPlease, create a role that will host all these tasks and a playbook that will call that role.",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 3
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ea200d1_44e71a6e",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 1,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-03T13:57:26Z",
      "side": 1,
      "message": "@Maxim,\nFaced need code duplication to run performance and was not supported in multiple existing tasks when using roles for this performance automation.\nI have already tried using the roles and also you can see patchset 2 in this patch but was not supporting because of multiple levels required using delegate_to since host is always same as undercloud from playbook for all the tasks for looping multiple test cases.",
      "parentUuid": "5ef0454b_b68c1224",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 3
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2f89eef_72e754ce",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 1,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T15:25:20Z",
      "side": 1,
      "message": "Instead of making multiple delegates, split a role into smaller roles.",
      "parentUuid": "9ea200d1_44e71a6e",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 3
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b67c013f_6e883db5",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 1,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-03T17:05:48Z",
      "side": 1,
      "message": "@maxim,\nNot multiple delegates_to definition tasks, its multilevels delegates_to definitions. so getting current host in smaller roles is incorrect.\n\nand also smaller roles already used in performance scenario playbook. if i create new playbook with using existing performance playbook scenarios as part of another roles. consuming new role will be duplicated but also performance automation fails in multiple roles like getting current invoking task host in some places is incorrect.\n\ni think, reusing playbook reduces the code duplication better than reusing roles directly in multiqueue automation.",
      "parentUuid": "c2f89eef_72e754ce",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 3
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb5d3847_778812fc",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 1,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T17:41:51Z",
      "side": 1,
      "message": "If you are reusing the roles in another playbook, it is not a duplication, it is reuse.\n\nI will appreciate if you will explain the flow you are trying to create, so we could make a brainstorm on how to implement this.\n\nI would like to keep extending the repo according to best practices.\nKeep it simple and properly test it.",
      "parentUuid": "b67c013f_6e883db5",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 3
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d8a7bb8_7122bbf2",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 1,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-04T06:12:26Z",
      "side": 1,
      "message": "@Maxim,\n\nSure we can discuss and finalize the approach.\n\nCan you share the best practices link which we are following in ansible nfv?\n\nI could see importing playbooks also part of best practices.\nhttps://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html\n\nyes, i agree using the roles increases the re-usability. \nI am confused, we already performance-scenario playbook and just importing in multiqueue automation.",
      "parentUuid": "fb5d3847_778812fc",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 3
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f25c7858_238eddfe",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 50,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T12:53:22Z",
      "side": 1,
      "message": "Podman had been introduced in osp 16 and later.\nShould it work with osp 13 as will, which has docker in it?\n\nIf yes, one task ahead should check for the podman/docker and set a fact that will be executed in this task.",
      "range": {
        "startLine": 50,
        "startChar": 8,
        "endLine": 50,
        "endChar": 14
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e98bbd3f_78530f51",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 50,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-03T13:57:26Z",
      "side": 1,
      "message": "@maxim, Ack.\n@gowri,\n\nPlease let me know whether need to run this on osp13.",
      "parentUuid": "f25c7858_238eddfe",
      "range": {
        "startLine": 50,
        "startChar": 8,
        "endLine": 50,
        "endChar": 14
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36e93878_77df7ed9",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 50,
      "author": {
        "id": 1017708
      },
      "writtenOn": "2020-08-04T06:10:52Z",
      "side": 1,
      "message": "I ack on adding fact that irrespective of podman or docker, code will run always. We will see if osp 13 needs execution but that is different scope.",
      "parentUuid": "e98bbd3f_78530f51",
      "range": {
        "startLine": 50,
        "startChar": 8,
        "endLine": 50,
        "endChar": 14
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15d4d2a9_29971312",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 55,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T12:53:22Z",
      "side": 1,
      "message": "Please, do not over complicate the tasks.\nI assume this task could be split into a number of tasks.\nOne (more?) that gather the information and other that performs a change.",
      "range": {
        "startLine": 55,
        "startChar": 8,
        "endLine": 55,
        "endChar": 228
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb31928f_0ea000a1",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 55,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-03T13:57:26Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "15d4d2a9_29971312",
      "range": {
        "startLine": 55,
        "startChar": 8,
        "endLine": 55,
        "endChar": 228
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b96ec083_e0d45083",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 71,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T12:53:22Z",
      "side": 1,
      "message": "Why not use the openstack_tasks role with the proper flavor details definition?",
      "range": {
        "startLine": 71,
        "startChar": 8,
        "endLine": 71,
        "endChar": 49
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bee53bde_6390b7a1",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 71,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-03T13:57:26Z",
      "side": 1,
      "message": "@maxim,\n\nWe need to recreate the flavor with new config which is based on multiple queues in the test cases. so only providing required configs in the test cases and updating those fields here and passing as dynamic local variables for existing performance playbook.",
      "parentUuid": "b96ec083_e0d45083",
      "range": {
        "startLine": 71,
        "startChar": 8,
        "endLine": 71,
        "endChar": 49
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "601a341b_1eb4359a",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 71,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T15:25:20Z",
      "side": 1,
      "message": "Where do you take the \"multiqueue_flavors\" and \"multiqueue_instances\" from?",
      "parentUuid": "bee53bde_6390b7a1",
      "range": {
        "startLine": 71,
        "startChar": 8,
        "endLine": 71,
        "endChar": 49
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14a064c8_9145a373",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 116,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T12:53:22Z",
      "side": 1,
      "message": "I did not checked, but just a question.\nDoes the existing openvswitch ansible modules, support any kind of data gathering?",
      "range": {
        "startLine": 116,
        "startChar": 8,
        "endLine": 116,
        "endChar": 27
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "422f0329_1b2fe049",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 116,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-03T13:57:26Z",
      "side": 1,
      "message": "@maxim,\nI did not find data gathering support in openvswitch ansible modules.",
      "parentUuid": "14a064c8_9145a373",
      "range": {
        "startLine": 116,
        "startChar": 8,
        "endLine": 116,
        "endChar": 27
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc17393b_887544a1",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 116,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T15:25:20Z",
      "side": 1,
      "message": "ok.",
      "parentUuid": "422f0329_1b2fe049",
      "range": {
        "startLine": 116,
        "startChar": 8,
        "endLine": 116,
        "endChar": 27
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8cf51419_7a789bf7",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 147,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T12:53:22Z",
      "side": 1,
      "message": "Same as above regarding podman/docker.",
      "range": {
        "startLine": 147,
        "startChar": 12,
        "endLine": 147,
        "endChar": 18
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3947df98_2f43e5c8",
        "filename": "playbooks/packet_gen/trex/nfv_multiqueue_performance.yml",
        "patchSetId": 9
      },
      "lineNbr": 147,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-03T13:57:26Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "8cf51419_7a789bf7",
      "range": {
        "startLine": 147,
        "startChar": 12,
        "endLine": 147,
        "endChar": 18
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b5d82a14_39ee9063",
        "filename": "playbooks/packet_gen/trex/templates/nfv_multiqueue_tests.yml.j2",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T12:53:22Z",
      "side": 1,
      "message": "Holding a jinja template under the playbooks structure is not a good idea.\n\nYou can maybe loop over the role, but it still sounds not the right approach.\nThe better way is to loop over the scenarios inside the role.",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 20,
        "endChar": 12
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69474a05_098c2010",
        "filename": "playbooks/packet_gen/trex/templates/nfv_multiqueue_tests.yml.j2",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-03T13:57:26Z",
      "side": 1,
      "message": "@maxim,\n\nWe can not use roles for this since lot of code duplication in performance playbooks and multiple existing tasks are not supporting due to multi level delegate_to requirements.\n\nI think, this is better approach than using roles with code duplication and impacting existing multiple tasks for this changes.\n\nlooping playbooks are not supported in another playbook. so just we need to run prerun playbook to create the required playbook for the automation.",
      "parentUuid": "b5d82a14_39ee9063",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 20,
        "endChar": 12
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "041ea8e4_baf7c3c8",
        "filename": "playbooks/packet_gen/trex/templates/nfv_multiqueue_tests.yml.j2",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T15:25:20Z",
      "side": 1,
      "message": "If a role contains multiple \"delegate_to\" definitions, it means that the role needs to be separated to a smaller roles.\n\nWhat do you mean by code duplication?\nTHe purpose of the roles and playbooks and pointers is to perform a code reuse and not make a duplication.\nIf the tasks will reside in the role, you will be able to call it multiple times with a different variables definition.\nIn such way, you will reuse the roles.",
      "parentUuid": "69474a05_098c2010",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 20,
        "endChar": 12
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "298bf762_a798fb57",
        "filename": "playbooks/packet_gen/trex/templates/nfv_multiqueue_tests.yml.j2",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-03T17:05:48Z",
      "side": 1,
      "message": "@maxim,\nNot multiple delegate_to definitions, mean multi levels delegate_to triggers when invoking from playbook using multiple smaller roles.\n\nYes code reuse is the benefit for using roles but we are not able to get current host exactly when using multiple smaller roles using delegate_to tasks in multi levels.\n\neven in multiple playbooks, invoking the multiple smaller roles needs to be duplicated in the performance scenario playbooks.\n\ninstead of that, i am using existing performance playbook in this multiqueue performance automation. No code duplication changes required if any changes to be done in performance_scenario yml file later.\n\nJust reusing performance scenario yml in the NFV multiqueue performance automation.",
      "parentUuid": "041ea8e4_baf7c3c8",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 20,
        "endChar": 12
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7885314f_d6060226",
        "filename": "playbooks/packet_gen/trex/templates/nfv_multiqueue_tests.yml.j2",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T17:41:51Z",
      "side": 1,
      "message": "I\u0027m sorry, but using a jinja to generate a role from a role is against all best practices.\nAnd I don\u0027t see a proper way of testing and maintaining it.\n\nAs I mentioned in another comment, I would appreaciate if you could share the flow you are trying to reach and we could see how to best implement it.",
      "parentUuid": "298bf762_a798fb57",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 20,
        "endChar": 12
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a779d0b8_0e1f295f",
        "filename": "playbooks/packet_gen/trex/templates/nfv_multiqueue_tests.yml.j2",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-04T06:12:26Z",
      "side": 1,
      "message": "@maxim,\nHere i am not generating the roles, generating required playbook for multiqueue perf automation since we are already following jinja 2 template like creating trex config file etc..",
      "parentUuid": "7885314f_d6060226",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 20,
        "endChar": 12
      },
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44c7e1e2_17d5efcf",
        "filename": "samples/multiqueue_test_cases.yaml",
        "patchSetId": 9
      },
      "lineNbr": 1,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2020-08-03T12:53:22Z",
      "side": 1,
      "message": "This file should be located inside the role I mentioned in the previous comments.",
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "54f9abd9_ae489023",
        "filename": "samples/multiqueue_test_cases.yaml",
        "patchSetId": 9
      },
      "lineNbr": 1,
      "author": {
        "id": 1015848
      },
      "writtenOn": "2020-08-03T13:57:26Z",
      "side": 1,
      "message": "@maxim,\nAgree, If we use roles, we need to move this to role default main yaml but here i am using nested playbooks so we need to decide the new path to place this test cases file.",
      "parentUuid": "44c7e1e2_17d5efcf",
      "revId": "fac04f1ccf52abcf9035c053687537f3937fd03e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}